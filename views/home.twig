{% extends "html.twig" %}
{% set title = t.home.home %}

{% block content %}
{% set randomhi = t.home.hellos|shuffle[0] %}
<div class="d-flex flex-row-reverse flex-wrap gap-5" style="align-content: flex-start;">

  <div class="d-flex flex-column gap-3" style="flex-shrink: 3; flex-grow: 1; flex-basis: 24em;">
    <div class="d-flex flex-row gap-6 ai-center">
      <div class="pos-relative">
        <img class="round-4" height=96 width=96 src="{{ cuser.get_headshot() }}">
        {% if cuser.is_online %}<i class="pos-absolute icon-online bottom-0 right-0 p-2" style="transform: translate(25%, 25%);"></i>{% endif %}
      </div>
    <h2>{{ randomhi }}, {{ cuser.username|e }}</h2>
    </div>
    <hr class="my-2">
    <div class="tablet-hide">
      <h3>news</h3>
      nothing rn
      <hr class="mb-2 mt-4">
    </div>
  </div>


  <div class="d-flex flex-column" style="flex-grow: 5; flex-basis: 30em;">
    <div class="d-flex flex-row gap-5"><h3>{{ t.home.friends }} ({{ friends|length }})</h3> <a class="btn-primary ms-auto as-baseline">{{ t.home.see_all }}</a></div>
      {% if friends|length == 0 %}
      <div class="d-flex flex-column ai-center gap-2 p-2">
        <h1 style="font-size: 4em;" class="bi bi-egg-fried"></h1>
        <h4>no friends found</h4>
        <small class="text-muted">heres a fried egg for you</small>
      </div>
    {% else %}
      <div class="d-grid gap-4" style="grid-template-columns: repeat(auto-fill, minmax(84px, 1fr));">
      {% for friend in friends %}
        <a href="/users/{{ friend.id }}/profile" class="d-flex flex-column" style="align-items: center; padding: 0; margin-top: 0.3em;">
          <div class="img-fluid pos-relative">
            <img src="{{ friend.get_headshot() }}" class="round-4 img-fluid">
            {% if friend.is_online %}<i class="pos-absolute icon-online bottom-0 right-0" style="transform: translate(25%, 25%);"></i>{% endif %}
          </div>
          <div class="d-flex flex-column border-box m-1 my-0 text-center"><h5 class="text-muted text-truncate">{{ friend.username|truncate(11, "…") }}</h5>
          {#<small class="text-extramuted mt-1 s"><b class="breakword">{{ "something"|truncate(11, "…") }}</b></small>#} {# to implement #}</div>
        </a>
      {% endfor %}
      </div>
    {% endif %}

    <hr class="my-3">  
    <div class="d-flex flex-row gap-5"><h3>{{ t.home.recently_played }}</h3> <a class="btn-primary ms-auto as-baseline">{{ t.home.see_all }}</a></div>
    {% if recently_played|length == 0 %}
      <div class="d-flex flex-column ai-center gap-2 p-2">
      <h1 style="font-size: 4em;" class="bi bi-egg-fried"></h1>
      <h4>no recently played games</h4>
      <small class="text-muted">maybe play a game?</small>
      </div>
    {% else %}
      <div class="d-grid gap-4" style="grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));">
      {% for game in recently_played %}
        {% include '/components/game_default.twig' with { game } %}
      {% endfor %}
      </div>
    {% endif %}
    </div>

</div>
{% endblock %}