{% extends "html.twig" %}
{% set title = game.title|e %}

{% block content %}
<div class="d-flex flex-row gap-5 flex-wrap">
  <div class="flex-1" style="flex-basis: 32em; flex-shrink: 1;"><img src="/assets/img/crossroads16x9.png" class="img-fluid" style="height: 100%; width: 100%; object-fit: contain; aspect-ratio: 16/9;"></div>
  <div class="flex-1 d-flex flex-column gap-1" style="flex-basis: 12em; flex-grow: 2;">
    <h1>{{ game.title|e }}</h1>
    <span class="mb-3">by <a class="link-light" href="/users/{{ game.user.id }}/profile">{{ game.user.username|e }}</a></span>
    <button onclick="popupify(this, elem('#game-load-prompt')); cuser.play({{ game.id }}); setTimeout(() => elem('#game-load-prompt').removeAttribute('open'), 3000)" class="d-flex jc-center ai-center btn-play p-1 mt-auto"><i class="bi bi-play-fill m-auto" style="font-size: 2.5em; line-height: 0.65em;"></i></button>
  </div>
</div>
<div class="d-flex flex-column mt-3 gap-3">
  <div id="tabs" hx-target="#tab-content" role="tablist" class="d-flex flex-row pillify flex-wrap"
    hx-on:htmx-after-on-load="htmx_tabs(this, event)">
    <button class="flex-1 text-center" role="tab" aria-controls="tab-contents" hx-get="/game/{{ game.id }}/about" disabled>about</button>
    <button class="flex-1 text-center" role="tab" aria-controls="tab-contents" hx-get="/game/{{ game.id }}/store">store</button>
    <button class="flex-1 text-center" role="tab" aria-controls="tab-contents" hx-get="/game/{{ game.id }}/servers">servers</button>
  </div>
  <hr nomargin>
  <div id="tab-content" role="tabpanel" hx-get="/game/{{ game.id }}/about" hx-trigger="revealed"></div>
</div>
{% endblock %}

{% block body %}
<div class="popupify" id="game-load-prompt">
  <div class="pos-relative d-flex flex-column card p-0 overflow-hidden popupify-window" style="width: 100%; max-width: 22em; height: 100%; max-height: 13em;">
    <div style="top: 0; right: 0;" class="c-pointer pos-absolute bi bi-x-lg h2 text-muted popup-close m-2"></div>
    <div class="d-flex flex-column ai-center gap-4 p-3 m-auto">
      <img width=75 height=75 src="/assets/img/logo-t.svg">
      <h4>launching</h4>
    </div>
    <div style="bottom: 0;" class="pos-absolute py-2 w-100 loadingbaranim"></div>
  </div>
</div>
{% endblock %}