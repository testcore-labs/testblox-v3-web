{% macro param_ignore(params, ignore) %}
  {%- set urlparams = "" %}
  {%- for _urlparam, urlparam in params %}
    {%- if _urlparam != ignore %}
      {%- set urlparams = urlparams ~ _urlparam ~ "=" ~ urlparam ~ (params|keys|last != _urlparam ? "&" : "") %}
    {%- endif %}
  {%- endfor %}
  {{ urlparams }}
{% endmacro %}

{% macro param_end_ampersand(params) %}{%- spaceless %}
{% set urlparams = params %}
{% if urlparams|last != "&" %}
  {% set urlparams = urlparams ~ "&" %}
  {{ urlparams }}
{% endif %}
{% endspaceless -%}{% endmacro %}